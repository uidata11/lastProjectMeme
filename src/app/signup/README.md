# 📝 회원가입 페이지 명세서

회원가입은 **2단계 구성**으로 이루어져 있습니다.  
1단계에서는 기본 정보를 입력하고,  
2단계에서는 닉네임, 프로필 이미지, 소개글을 설정합니다.

---

## 📌 1단계 - 기본 정보 입력

### ✅ 입력 항목

| 항목      | 설명                              |
| --------- | --------------------------------- |
| 이름      | 필수, 2~4자 사이 (한글 허용)      |
| 이메일    | 필수, 이메일 형식, 중복 검사 포함 |
| 비밀번호  | 필수, 8~12자 제한                 |
| 생년월일  | 년/월/일 `react-select` 사용      |
| 전화번호  | 숫자만 입력, 11자리               |
| 위치 동의 | 체크박스, 미동의 시 경고 표시     |

### 🧠 상태 관리

- 입력값은 `sessionStorage.signupUser`에 저장
- 새로고침 시 자동 복원
- 각 필드 입력 후 `Enter` 키 입력 시 다음 필드로 자동 포커스 이동
  - 생년월일 선택 완료 → 전화번호 필드로 이동
  - 전화번호 완료 → 위치동의 체크박스로 이동

### ❗ 유효성 검사 규칙

- **이름**: 미입력 시 `"이름을 입력해주세요"`, 길이 초과/미달 시 메시지 표시
- **이메일**:
  - 형식 오류 시 `"email@email.com 형식으로 입력해주세요"`
  - 중복 시 `"이미 사용 중인 이메일입니다."`
- **비밀번호**: `"비밀번호를 8자리 이상 12자리 미만으로 설정해주세요"`
- **전화번호**: `"- 없이 숫자만 입력해주세요"` 또는 `"전화번호는 11자리로 입력해주세요"`
- **위치 동의**: 미체크 시 `"위치정보 제공에 동의해주세요"`

### ✅ 다음 단계 처리

- 모든 입력이 유효하면 Firebase Auth로 계정 생성
- Firestore에는 아직 저장되지 않음
- 다음 경로로 이동: `/signup/settingprofile`

---

## 📌 2단계 - 프로필 설정

### ✅ 입력 항목

| 항목           | 설명                                           |
| -------------- | ---------------------------------------------- |
| 닉네임         | 중복 검사 포함, 영문/숫자만, 18자 미만         |
| 프로필 이미지  | 선택 시 미리보기 가능, Firebase Storage 업로드 |
| 자기소개 (bio) | 최대 100자, 초과 시 오류 메시지 표시           |

### 🧠 상태 관리

- 입력 중간 상태는 `sessionStorage.profileDraft`에 저장
- `signupUser` 키에 저장된 기본 계정 정보와 병합하여 최종 저장

### ❗ 유효성 검사

- **닉네임**
  - 미입력: `"닉네임을 입력하세요"`
  - 한글 포함 시: `"한글은 입력할 수 없습니다"`
  - 중복 시: `"닉네임이 중복됩니다"`
- **소개글**
  - 100자 초과 시: `"소개글은 100자 이하로 입력해주세요"`

### 📤 제출 및 처리

- 유효성 검사 후 프로필 이미지가 있다면 Firebase Storage 업로드
- 전체 사용자 정보를 Firestore `users` 컬렉션에 저장
- Firebase Auth에 다시 로그인 (`signin`)
- 완료 후 메인 페이지(`/`)로 이동
- 세션 스토리지 제거: `signupUser`, `profileDraft`

---

## ⚠️ 오류 및 예외 처리

- 닉네임 중복 또는 형식 오류 시 AlertModal 표시
- 가입 절차 누락(예: `signupUser` 없음) 시 다시 `/signup`으로 리디렉션
- 가입 중 예외 발생 시 `"회원가입 중 문제가 발생했습니다"` 메시지 출력
